<!DOCTYPE html>
<html >
<head>
	<meta charset="UTF-8">
	<title>React</title>
	<script src="node_modules/react/dist/react.min.js"></script>
	<script src="node_modules/react/dist/react-dom.js"></script>
	<script src="https://unpkg.com/react-router/umd/ReactRouter.min.js"></script>
	<script src="src/js/browser.min.js"></script>
<body>
	<div id="container"></div>
	<script type="text/babel">
		var Router = ReactRouter.Router;
		var Route = ReactRouter.Route;
		var Link = ReactRouter.Link;

		var IndexRoute =  ReactRouter.IndexRoute; //设置默认页面（index）
		var Redirect =  ReactRouter.Redirect; //url重定向
		var browserHistory = ReactRouter.browserHistory;
		var Lifecycle = ReactRouter.Lifecycle;

		const Dashboard = React.createClass({
		  render() {
		    return <div>Welcome to the app!</div>
		  }
		})

		const Message = React.createClass({
		  render() {
		    return <h3>hello Message {this.props.params.id}</h3>
		  }
		})

        
        const About = React.createClass({
        	mixins: [ Lifecycle ],
        	routerWillLeave(nextLocation) {
			   if (true)
			      return 'Your work is not saved! Are you sure you want to leave?'
			},

        	render(){
        		return(<h1>wakakak</h1>)
        	}
        })

        const Inbox = React.createClass({
        	render(){
        		return(
				<div>
			        <h2>Inbox</h2>
			        {/* 渲染这个 child 路由组件 */}
			        {this.props.children || "Welcome to your Inbox"}
			    </div>
        		)
        	}
        })

		const App = React.createClass({
		  render() {
		    return (
		      <div>
		        <h1>App</h1>
		        <ul>
		          <li><Link to="/inbox" activeClassName="active">Inbox</Link></li>
		          <li><Link to="/about" activeClassName="active">About</Link></li>
					
		        </ul>
		        {this.props.children}
		      </div>
		    )
		  }
		})

		ReactDOM.render((
		  <Router >
		    <Route path="/" component={App}>
		      <IndexRoute component={Dashboard} />
		      <Route path="about" component={About} />
		      <Route path="inbox" component={Inbox}>
		      	<Route path="/messages/:id" component={Message} />
		      	<Redirect from="messages/:id" to="/messages/:id" />
		      </Route>
		    </Route>
		  </Router>
		), document.getElementById('container'))
	</script>
</body>
</html>